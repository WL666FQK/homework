## 2 Linux常用命令

#### 2.1 用户配置

Linux下有两种用户：超级用户(root)、普通用户。

超级用户的命令提示符是“#”，普通用户的命令提示符是“$”。

1. **切换超级用户**：su，或su root。（root可以省略）

   **切换用户**：su [用户名]

   普通用户以root的身份去做事情，使用命令**sudo**，用sudo时，输入的是自己的密码。

2. **添加用户**：useradd 用户名

   sudo useradd -m 用户名 -s /bin/bash，-s的作用是指定使用的脚本解析器。

3. **设置或修改密码**：passwd 用户名  

   例如，要给刚才创建的user1用户设置一个密码123456，则使用passwd user1，然后系统会提示输入新密码。

   注：root用户才可以给新创建的用户配置密码，sudo passwd 用户名。

4. **删除用户**：sudo userdel -r 用户名

   删除用户时出现错误： user xiongda is currently used by process xxx。

   原因：上面用su切换过当前用户，相当于被压入栈，应该退出。

   解决办法：输入几次exit命令。

5. **查看当前路径**：pwd

6. **查看用户目录**：ls ..或ls /home

7. **查看当前用户的命令历史记录**：history

通过“**cat /etc/passwd**”命令可以查看linux系统下有哪些用户。

**ctrl+A**：光标回到行首，**ctrl+E**：光标回到尾部。

**Tab键**有自动补全功能，如输入usera之后按Tab键会直接出来useradd。

出现登录后只有一个$符号的原因是因为useradd没有加**-s参数**。



问题：

- 出现无法定位软件包异常怎么办？

  解决办法：执行sudo apt update

- xshell中输入退格出现乱码？

  解决办法：选中当前会话，右键连接，选择属性，改成ASCII



#### 2.2 目录及文件操作

1. **查看文件和目录**：ls [选项] [目录或文件]

   若ls后不跟参数，则显示当前路径。ls /命令显示linux下从根开始所有的目录。

   对于目录，该命令列出该目录下的所有子目录与文件。对于文件，将列出文件名以及其他信息。

   **常见选项**：

   **-a**，显示指定目录下所有子目录与文件。

   例如列出“/root/home”目录下的所有子目录及文件，则使用 ls -a /root/home。

   就会把隐藏文件显示出来，Linux下如果文件名以点开头就是隐藏文件，配置文件会作为隐藏文件。

   **-l**，列出指定目录下所有目录及文件的详细信息。

   例如列出“/root/home”目录下的所有子目录及文件，则使用 ls -l /root/home。

   每行列出的详细信息依次是：文件类型与权限、连接数、文件所有者、文件所属组、文件大小、最近修改时间、文件名字。 

   使用**ls -l**命令显示的信息中，开头是由10个字母构成的字符串，其中第一个字符表示文件类型，它可以是下列类型之一：

   -：普通文件

   d：目录

   l：符号链接

   b：块设备文件

   后面的9个字符表示文件的访问权限，分为3组，每组3位。第一组表示文件创建者的权限，第二组表示同组用户的权限，第三组表示其他用户的权限。每一组的三个字符分别表示对文件的读、写、执行权限。

   各权限如下：r（读）、w（写）、x（执行）、_（没有设置权限）

   r的值是4，w的值是2，x的值是1

   

   **ls -lh /** 显示的信息里有人类可读的文件大小。

   

2. **创建目录**：mkdir 目录名

3. **进入目录**：cd 目录名

4. **显示当前工作目录**：pwd

5. **删除目录**：rmdir [选项] 目录名，该目录名必须是空目录

6. **拷贝文件或目录**：cp [选项] 源文件或目录 目标文件或目录

   **-f**：若目标目录中存在于源文件同名的文件，则直接覆盖，不提示。

   **-i**：和-f相反，当目标文件中存在与源文件同名的文件，copy时系统会提示是否进行覆盖。

7. **移动文件或目录**：mv [选项] 源文件或目录 目录文件或目录

   **-f**：若在移动的过程中存在重名的，则直接覆盖，不提示。

   **-i**：和-f相反，若在移动的过程中存在重名的，系统会提示是否进行覆盖。

8. **删除文件或目录**:rm [选项] 文件或目录，例如rm -rf 目录名

   **-f**：删除过程中不会给出提示。

   **-i**：删除过程中会给出交互时提示（一般不使用）。

   **-r**：如果删除的是一个目录，则将该目录下的目录及子目录均删除。

9. **显示目录树形结构**：tree

   执行**sudo apt install tree**进行安装

   **tree -h**：显示每个文件大小

10. **改变目录或文件的权限**：chmod命令

    数字设定法：0表示没有权限，1表示可执行权限，2表示可写权限，4表示可读权限，然后相加。

    数字属性的格式应为3各从0到7的八进制数，其顺序是（u）（g）（o）

    一般形式：chmod [mode] 文件名

    

11. **文件查找**：find 起始目录 查找条件 操作

    命令的查找条件可以是一个逻辑运算符not、and、or组成的复合条件。

    **find . -name "file*"**表示查找file开头的文件或目录。

    **and**：逻辑与，在命令中用-a表示，表示只有当所有的条件都满足时，查找条件满足。 

    **or**：逻辑或，在命令中用-o表示，表示只要所给的条有一个满足，查找条件就满足。

    **not**：逻辑非，在命令中用！表示查找不满足所给条件的文件。

    根据名称和文件的属性查找：-name ‘字串’查找文件名匹配所给字串的所有文件，字串内可用通配符*、？、[ ]

    *代表零个或者任意多个字符

    ？有且仅有一个字符

    [ ] 连续的一部分字符，例如find . -name "file[1-3]"查找file1、file2、file3

    **-gid n**，查找属于ID号为n的用户组的所有文件。

    **-uid n**，查找属于ID号为nd的用户的所有文件。

    **-group '字串'**，查找属于用户名所给字串的所有的文件。

    **-empty**，查找大小为0的目录或文件。

    **-perm 权限**，查找具有指定权限的目录和文件，权限的表示可以如771，644。

    **-size n[bckMG]**，查找指定文件大小的文件，n后面的字符表示单位，缺失为b，代表512字节的块。后面要带加号或减号。

    **-type x**，查找类型为x的文件，x为下列字符之一：

    b：块设备文件

    c：字符设备文件

    d：目录文件

    p：命名管道(FIFO)

    f：普通文件

    l：符号链接文件，**ln -s**建立软链接，**ln**建立硬链接

    s：socket文件

    

    根据时间查找：

    **-mmin n**：查找n分钟以前文件内容被修改过的所有文件。

    **-mtime n**：查找n天以前文件内容被修改过的所有文件。

    

    可执行的操作：

    -exec  命令名称  { } ：岁符合条件的文件执行所给的Linux命令，而不询问用户是否需要执行该命令。{ }表示命令的参数即为所找到的文件；命令的末尾必须以“\;”结束。

    例如，在“/home/user”目录下查找名为main.c文件并显示这些文件的详细信息，则使用

    **find  /home/user -name  main.c -exec ls -l {} \;**

    **find /home/user -name main.c|xargs ls -l** 

    例如，删除当前目录下的file文件或目录：find . -name file|xargs rm -rf

    

12. **列出文件系统的整体磁盘空间使用情况**：df [选项] [文件名]

    **-h**：--human-readable，以人们易读的GB、MB、KB等格式显示，可以直接**df -h**显示整个磁盘使用情况。

13. **显示每个文件和目录的磁盘使用空间**：du [选项] [文件名]

    **-h**：--human-readable，以人们易读的GB、MB、KB等格式显示，操作发现目录的每一级都显示，如果只想显示当前目录，**du -h --max-depth=0 .**

14. **创建文件**：touch 文件名

15. **在文件中写入**：echo 内容 >文件名

16. **查看文件内容**：cat 文件名

17. **将命令历史记录的最后九条写到文件里**：history |tail -9 >文件名

18. **查找某条命令是否存在**：which 命令



**改变工作目录**：cd ..到上一级目录；cd /到根目录；cd ~到用户主目录下，~与直接执行cd效果一样；cd -到上一次目录

**相对路径**：cd 目录名

**绝对路径**：cd /目录名



**如何让xshell中变色**：在命令行执行export PS1="\[\e[37;40m\][\[\e[32;40m\]\u\[\e[37;40m\]@ \[\e[36;40m\]\w\[\e[0m\]]\\$ "

**危险的命令**：sudo rm -rf /

**左键复制，右键粘贴**：点击菜单栏里的工具->选项->键盘和鼠标，勾选将选定的文本自动复制到剪切板，向右按钮选为粘贴剪切板内容。

**查看对应命令的帮助**：man 命令，通过**/**进行搜索。例如/size，则搜索size内容





#### 2.3 文件查看及命令处理

1. **显示文件内容的前几行**：head -n 行数值 文件名

2. **显示文件的后几行**：tail -n 行数值 文件名

3. **对文件内容进行排序**：sort 文件名

4. **通过文件内容判别文件类型**：file 文件名

5. **报告或删除文件中重复的行**：uinq 文件名

   **-c**：在输出行前面加上每行在输入文件中出现的次数。

   **-d**：仅显示重复行。

   **-u**：仅显示不重复的行。

6. **统计指定文件中的行数、字数、字节数**：wc 文件名

   **-c**：统计字节数。

   **-l**：统计行数。

   **-m**：统计字符数。

   **-w**：统计字数。



 

#### 2.4 其他命令

1. **scp远程copy文件命令**：scp filename username@ip:path

   **filename**：文件名称

   **username**：copy到的目标主机的用户名

   **ip**：目标主机IP

   **path**：目标主机路径

2. **文档管理**：tar [著选项＋辅选项] 目标文档 源文件或目录

   tar命令可以把一大堆文件和目录全部打包成一个文件。

   **c**：创建新的档案文件。

   **x**：从档案文件中释放文件。

   **f**：使用档案文件或设备。

   **v**：在归档过程中显示处理的文件。

   **z**：用gzip来压缩/解压缩文件，后缀名为.gz，加上该选项后可以将档案文件进行压缩。

   例如，把“/home/user/0718”下的所有后缀为.c的归档到source.tar，则使用**tar cvf xxx.tar /home/user/0718/*.c**。

   如果在归档过程中还要进行压缩，则使用tar czvf xxx.tar.gz /home/user/0718/*.c。

3. **文件压缩解压**：gzip/bzip2 [选项] 压缩或解压缩的文件名

   gzip用来将文件压缩成后缀为.gz的压缩文件，或者将后缀为.gz的文件进行解压。

   bzip2用来将文件压缩成后缀为.bz2的压缩文件，或者将后缀为.bz2的压缩文件解压。

   **-d**：将压缩文件进行解压。

   **-v**：在压缩或解压的过程中显示解压或压缩的文件。

4. **无密钥登录设置：**

   ssh-keyen执行命令一直回车即可

   ssh-copy-id username@ip

   

   

   

   

   

   

   



